@model DateFieldSettings
@using Coevery.Fields.Settings;

<section class="control-group data-row">
    <label class="control-label">
        Default Value
    </label>
    <div class="controls input-prepend errortips">
        <span class="add-on">
            <i data-time-icon="icon-time" data-date-icon="icon-calendar"></i>
        </span>
        @Html.TextBoxFor(d => d.DefaultValue, new { @class = "date" })
    </div>
</section>

@* generates the localization script *@
@Display.BootstrapDatePickerLocalization()

<script type="text/javascript">
    //<![CDATA[
    $(function () {
        var defaultDate = $("#@Html.FieldIdFor(m => m.DefaultValue)");
        if (defaultDate.length != 0) {
            defaultDate.parent().datetimepicker({
                format: $.fn.datetimepicker.defaults.format_date,
                pickTime: $.fn.datetimepicker.defaults.pickTime_date
            });
            @if (Model.DefaultValue.HasValue) {
                <text>var date = new Date('@Model.DefaultValue.Value');
            defaultDate.parent().data('datetimepicker').setLocalDate(date);</text>
            }
        }
    });
    //]]>
</script>


@*<script>
    $(document).ready(function () {
        $(".add-on").click(function () {
            setTimeout(function () {
                $(".bootstrap-datetimepicker-widget").offset(function (index, coords) {
                    var result = { top: 0, left: 0 };
                    result.left = coords.left;
                    result.top = $(".input-prepend").offset().top -
                        $(".bootstrap-datetimepicker-widget").outerHeight(true) - 4;
                    return result;
                });
            }, 0);
        });
    });
</script>*@

