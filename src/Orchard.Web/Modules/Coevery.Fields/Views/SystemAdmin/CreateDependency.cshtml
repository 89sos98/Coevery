@using Orchard.Utility.Extensions
@model Coevery.Fields.ViewModels.FieldDependencyViewModel
<header id="main-header" class="page-header" style="background-image: none; margin-bottom: 0;">
    <h1 id="main-heading" style="background-image: none;">Field Dependency <span>Define dependencies between fields</span></h1>
</header>

<section class="page-actions">
    <div class="step1">
        <button class="btn" ng-click="exit()">Back</button>
        <button class="btn" ng-click="next()">Next</button>
    </div>
    <div class="step2">
        <button class="btn" ng-click="exit()">Back</button>
        <button class="btn" ng-click="prev()">Previous</button>
        <button class="btn btn-primary" ng-click="save()">Save</button>
    </div>
</section>

<section id="main-content">
    <div class="row-fluid step1">
        <form class="form-horizontal">
            <fieldset>
                <legend>
                    <h5>Step 1. Select a control field and a dependent field</h5>
                </legend>
                <section class="control-group">
                    <label class="control-label">
                        Control Field
                    </label>
                    <div class="controls">
                        <select class="span12" ng-model="controlField">
                            @foreach (var field in Model.ControlFields) {
                                @Html.SelectOption(field.Name, false, field.DisplayName, new { field_type = field.FieldDefinition.Name })
                            }
                        </select>
                    </div>
                </section>
                <section class="control-group">
                    <label class="control-label">
                        Dependent Field
                    </label>
                    <div class="controls">
                        <select class="span12" ng-model="dependentField">
                            @foreach (var field in Model.DependentFields) {
                                @Html.SelectOption(field.Name, false, field.DisplayName)
                            }
                        </select>
                    </div>
                </section>
            </fieldset>
        </form>
    </div>
    <div class="row-fluid step2">
        <h5>Step 2. Edit the filter rules that control the values that appear in the dependent field for each value in the control field</h5>
        <div class="row-fluid">
            <section class="span12 widget">
                <section class="widget-content table-container">
                    <table class="table table-condensed" style="border-collapse: separate">
                        <thead>
                            <tr>
                                <th>{{controlField}}</th>
                                <th ng-repeat="controlFieldItem in controlFieldItems">{{controlFieldItem.Value}}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th rowspan="999">{{dependentField}}</th>
                            </tr>
                            <tr ng-repeat="dependentFieldItem in dependentFieldItems">
                                <td ng-repeat="controlFieldItem in controlFieldItems">
                                    <label class="checkbox">
                                        <input type="checkbox" name="{{controlFieldItem.Value}}" value="{{dependentFieldItem.Id}}">
                                        {{dependentFieldItem.Value}}
                                    </label>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </section>
            </section>
        </div>
    </div>
</section>

<script type="text/javascript">
    $(function () {
        $('.page-actions').affix({ offset: { top: 71 } });
    });
</script>
